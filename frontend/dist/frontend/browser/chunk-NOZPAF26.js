import{a as L,b as m,c as F,d as E,f as I,g as M,h as w,l as A,n as N}from"./chunk-FRNUN4OL.js";import{a as R}from"./chunk-QIJ7EUUU.js";import"./chunk-D44SGYRL.js";import{A as i,D as p,E as b,I as d,L as o,M as r,N as n,O as u,S as y,T as v,W as a,Y as c,ba as g,fa as h,ia as x,ka as C,ma as D,sa as S,ta as _}from"./chunk-EZFQJ4VP.js";var f=t=>({"border-red-400":t});function G(t,l){if(t&1&&(r(0,"div",19),a(1),n()),t&2){let s=v();i(),c(" \u2705 ",s.successMessage," ")}}function k(t,l){if(t&1&&(r(0,"div",20),a(1),n()),t&2){let s=v();i(),c(" ",s.errorMessage," ")}}function j(t,l){t&1&&(r(0,"p",21),a(1," Start date is required "),n())}function B(t,l){t&1&&(r(0,"p",21),a(1," End date is required "),n())}function P(t,l){t&1&&(r(0,"p",21),a(1," Reason must be at least 10 characters "),n())}function V(t,l){t&1&&(r(0,"span"),a(1,"Submit Request"),n())}function z(t,l){t&1&&(r(0,"span"),a(1,"Submitting..."),n())}var T=class t{constructor(l,s,e,q){this.fb=l;this.leaveService=s;this.router=e;this.cdr=q;this.leaveForm=this.fb.group({startDate:["",m.required],endDate:["",m.required],reason:["",[m.required,m.minLength(10)]]})}leaveForm;isLoading=!1;successMessage="";errorMessage="";get startDate(){return this.leaveForm.get("startDate")}get endDate(){return this.leaveForm.get("endDate")}get reason(){return this.leaveForm.get("reason")}onSubmit(){this.leaveForm.invalid||(this.isLoading=!0,this.errorMessage="",this.successMessage="",this.leaveService.applyLeave(this.leaveForm.value).subscribe({next:()=>{this.isLoading=!1,this.successMessage="Leave applied successfully!",this.cdr.detectChanges(),setTimeout(()=>this.router.navigate(["/employee/history"]),1500)},error:l=>{this.isLoading=!1,this.errorMessage=l.error?.message||"Something went wrong. Please try again.",this.cdr.detectChanges()}}))}static \u0275fac=function(s){return new(s||t)(p(A),p(R),p(S),p(h))};static \u0275cmp=b({type:t,selectors:[["app-apply-leave"]],decls:34,vars:18,consts:[[1,"min-h-screen","bg-gray-50","p-6"],[1,"max-w-2xl","mx-auto"],[1,"mb-6"],["routerLink","/employee/dashboard",1,"text-sm","text-blue-600","hover:underline"],[1,"text-2xl","font-bold","text-gray-800","mt-2"],[1,"text-gray-500","text-sm"],[1,"bg-white","rounded-xl","shadow-sm","p-8"],["class","bg-green-50 text-green-700 text-sm px-4 py-3 rounded-lg mb-5 border border-green-200",4,"ngIf"],["class","bg-red-50 text-red-600 text-sm px-4 py-3 rounded-lg mb-5 border border-red-200",4,"ngIf"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","date","formControlName","startDate",1,"w-full","px-4","py-2.5","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition",3,"ngClass"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["type","date","formControlName","endDate",1,"w-full","px-4","py-2.5","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition",3,"ngClass"],["formControlName","reason","rows","4","placeholder","Please describe the reason for your leave...",1,"w-full","px-4","py-2.5","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition","resize-none",3,"ngClass"],[1,"flex","gap-3","pt-2"],["type","submit",1,"bg-blue-600","hover:bg-blue-700","text-white","font-semibold","px-6","py-2.5","rounded-lg","text-sm","transition","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],["routerLink","/employee/dashboard",1,"bg-gray-100","hover:bg-gray-200","text-gray-700","font-semibold","px-6","py-2.5","rounded-lg","text-sm","transition"],[1,"bg-green-50","text-green-700","text-sm","px-4","py-3","rounded-lg","mb-5","border","border-green-200"],[1,"bg-red-50","text-red-600","text-sm","px-4","py-3","rounded-lg","mb-5","border","border-red-200"],[1,"text-red-500","text-xs","mt-1"]],template:function(s,e){s&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"a",3),a(4,"\u2190 Back to Dashboard"),n(),r(5,"h1",4),a(6,"Apply for Leave"),n(),r(7,"p",5),a(8,"Fill in the details below to submit your leave request"),n()(),r(9,"div",6),d(10,G,2,1,"div",7)(11,k,2,1,"div",8),r(12,"form",9),y("ngSubmit",function(){return e.onSubmit()}),r(13,"div")(14,"label",10),a(15,"Start Date"),n(),u(16,"input",11),d(17,j,2,0,"p",12),n(),r(18,"div")(19,"label",10),a(20,"End Date"),n(),u(21,"input",13),d(22,B,2,0,"p",12),n(),r(23,"div")(24,"label",10),a(25,"Reason"),n(),u(26,"textarea",14),d(27,P,2,0,"p",12),n(),r(28,"div",15)(29,"button",16),d(30,V,2,0,"span",17)(31,z,2,0,"span",17),n(),r(32,"a",18),a(33," Cancel "),n()()()()()()),s&2&&(i(10),o("ngIf",e.successMessage),i(),o("ngIf",e.errorMessage),i(),o("formGroup",e.leaveForm),i(4),o("ngClass",g(12,f,(e.startDate==null?null:e.startDate.invalid)&&(e.startDate==null?null:e.startDate.touched))),i(),o("ngIf",(e.startDate==null?null:e.startDate.invalid)&&(e.startDate==null?null:e.startDate.touched)),i(4),o("ngClass",g(14,f,(e.endDate==null?null:e.endDate.invalid)&&(e.endDate==null?null:e.endDate.touched))),i(),o("ngIf",(e.endDate==null?null:e.endDate.invalid)&&(e.endDate==null?null:e.endDate.touched)),i(4),o("ngClass",g(16,f,(e.reason==null?null:e.reason.invalid)&&(e.reason==null?null:e.reason.touched))),i(),o("ngIf",(e.reason==null?null:e.reason.invalid)&&(e.reason==null?null:e.reason.touched)),i(2),o("disabled",e.leaveForm.invalid||e.isLoading),i(),o("ngIf",!e.isLoading),i(),o("ngIf",e.isLoading))},dependencies:[D,x,C,N,I,L,F,E,w,M,_],encapsulation:2})};export{T as ApplyLeaveComponent};
