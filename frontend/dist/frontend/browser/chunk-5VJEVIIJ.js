import{a as C}from"./chunk-H7D4YFAQ.js";import{a as L,b as d,c as F,d as E,f as I,g as M,h as T,l as N,n as k}from"./chunk-FRNUN4OL.js";import"./chunk-D44SGYRL.js";import{A as o,D as u,E as v,I as m,L as a,M as t,N as i,O as p,S as g,T as h,W as r,Y as x,ba as c,ia as y,ka as S,ma as w,r as f,s as b,sa as _}from"./chunk-EZFQJ4VP.js";var R=n=>({"border-red-400":n});function V(n,l){if(n&1&&(t(0,"div",19),r(1),i()),n&2){let s=h();o(),x(" ",s.errorMessage," ")}}function j(n,l){n&1&&(t(0,"p",20),r(1," Please enter a valid email "),i())}function D(n,l){n&1&&(t(0,"p",20),r(1," Password must be at least 6 characters "),i())}function P(n,l){n&1&&(t(0,"span"),r(1,"Sign In"),i())}function B(n,l){n&1&&(t(0,"span"),r(1,"Signing in..."),i())}var A=class n{constructor(l,s,e){this.fb=l;this.authService=s;this.router=e;this.authService.isLoggedIn&&this.redirectUser(),this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}loginForm;isLoading=!1;errorMessage="";get email(){return this.loginForm.get("email")}get password(){return this.loginForm.get("password")}redirectUser(){this.authService.isAdmin?this.router.navigate(["/admin/dashboard"]):this.router.navigate(["/employee/dashboard"])}onSubmit(){if(this.loginForm.invalid)return;this.isLoading=!0,this.errorMessage="";let{email:l,password:s}=this.loginForm.value;this.authService.login(l,s).subscribe({next:e=>{this.isLoading=!1,setTimeout(()=>this.redirectUser(),100)},error:e=>{this.isLoading=!1,this.errorMessage=e.error?.message||"Login failed. Please try again."}})}goToRegister(){this.router.navigate(["/register"])}static \u0275fac=function(s){return new(s||n)(u(N),u(C),u(_))};static \u0275cmp=v({type:n,selectors:[["app-login"]],decls:31,vars:13,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-600","to-blue-900","flex","items-center","justify-center","px-4"],[1,"bg-white","rounded-2xl","shadow-2xl","w-full","max-w-md","p-8"],[1,"text-center","mb-8"],[1,"bg-blue-100","w-16","h-16","rounded-full","flex","items-center","justify-center","mx-auto","mb-4"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-8","w-8","text-blue-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-gray-500","mt-1","text-sm"],["class","bg-red-50 text-red-600 text-sm px-4 py-3 rounded-lg mb-4 border border-red-200",4,"ngIf"],[1,"space-y-5",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],["type","email","formControlName","email","placeholder","you@example.com",1,"w-full","px-4","py-2.5","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition",3,"ngClass"],["class","text-red-500 text-xs mt-1",4,"ngIf"],["type","password","formControlName","password","placeholder","\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",1,"w-full","px-4","py-2.5","border","border-gray-300","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-500","transition",3,"ngClass"],["type","submit",1,"w-full","bg-blue-600","hover:bg-blue-700","text-white","font-semibold","py-2.5","rounded-lg","transition","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[4,"ngIf"],[1,"text-center","text-sm","text-gray-500","mt-4"],["type","button",1,"text-blue-600","hover:underline","font-medium","bg-transparent","border-none","cursor-pointer",3,"click"],[1,"text-center","text-xs","text-gray-400","mt-6"],[1,"bg-red-50","text-red-600","text-sm","px-4","py-3","rounded-lg","mb-4","border","border-red-200"],[1,"text-red-500","text-xs","mt-1"]],template:function(s,e){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),f(),t(4,"svg",4),p(5,"path",5),i()(),b(),t(6,"h2",6),r(7,"LeaveMS"),i(),t(8,"p",7),r(9,"Sign in to your account"),i()(),m(10,V,2,1,"div",8),t(11,"form",9),g("ngSubmit",function(){return e.onSubmit()}),t(12,"div")(13,"label",10),r(14,"Email Address"),i(),p(15,"input",11),m(16,j,2,0,"p",12),i(),t(17,"div")(18,"label",10),r(19,"Password"),i(),p(20,"input",13),m(21,D,2,0,"p",12),i(),t(22,"button",14),m(23,P,2,0,"span",15)(24,B,2,0,"span",15),i()(),t(25,"p",16),r(26," Don't have an account? "),t(27,"button",17),g("click",function(){return e.goToRegister()}),r(28," Register "),i()(),t(29,"p",18),r(30,"Leave Management System \xA9 2026"),i()()()),s&2&&(o(10),a("ngIf",e.errorMessage),o(),a("formGroup",e.loginForm),o(4),a("ngClass",c(9,R,(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched))),o(),a("ngIf",(e.email==null?null:e.email.invalid)&&(e.email==null?null:e.email.touched)),o(4),a("ngClass",c(11,R,(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched))),o(),a("ngIf",(e.password==null?null:e.password.invalid)&&(e.password==null?null:e.password.touched)),o(),a("disabled",e.loginForm.invalid||e.isLoading),o(),a("ngIf",!e.isLoading),o(),a("ngIf",e.isLoading))},dependencies:[w,y,S,k,I,L,F,E,T,M],encapsulation:2})};export{A as LoginComponent};
